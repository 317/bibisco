<detailheader breadcrumbitems="$ctrl.breadcrumbitems" editmode="true"
  headertitle="jsp.scene.title.tags">
</detailheader>

<div class="detail-content-no-header-subtitle">
  <div class="container">

    <!-- POINT OF VIEW -->
    <div class="row">
      <div class="col-sm-12">
        <blockquote>
          <i class="page-header-subtitle page-subheader-truncate-title bibiscoNotSelectableText">
        {{'jsp.scene.pointOfView.subtitle' | translate}}</i>
        </blockquote>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-offset-1 col-sm-10">
        <button ng-repeat="pov in $ctrl.povs" type="button"
          ng-class="{ 'btn-info': pov.selected }"
          class="btn btn-sm scene-tags-button"
          uib-tooltip="{{'jsp.scene.button.pointOfView.'+pov.id+'.popover' | translate}}"
          ng-click="$ctrl.togglePov(pov.id)">
          {{'jsp.scene.button.pointOfView.'+pov.id | translate}}
      </div>
    </div>
    <div class="row scene-tags-section-subtitle" ng-if="$ctrl.showpovcharacter">
      <div class="col-sm-12">
        <blockquote>
          <i class="page-header-subtitle page-subheader-truncate-title bibiscoNotSelectableText">
        {{'jsp.scene.label.pointOfView.character' | translate}}</i>
        </blockquote>
      </div>
    </div>
    <div class="row" ng-if="$ctrl.showpovcharacter">
      <div class="col-sm-offset-1 col-sm-10">
        <button ng-repeat="character in $ctrl.povcharacters" type="button"
          ng-class="{ 'btn-info': character.selected }"
          class="btn btn-sm scene-tags-button"
          ng-click="$ctrl.togglePovCharacter(character.id)">
          {{character.name}}
        </button>
      </div>
    </div>

    <!-- CHARACTERS -->
    <div class="row scene-tags-section-title">
      <div class="col-sm-12">
        <blockquote>
          <i class="page-header-subtitle page-subheader-truncate-title bibiscoNotSelectableText">
        {{'jsp.scene.characters.subtitle' | translate}}</i>
        </blockquote>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-offset-1 col-sm-10">
        <button ng-repeat="character in $ctrl.scenecharacters" type="button"
          ng-class="{ 'btn-info': character.selected }"
          class="btn btn-sm scene-tags-button"
          ng-click="$ctrl.toggleSceneCharacter(character.id)">
          {{character.name}}
        </button>
      </div>
    </div>

    <!-- LOCATION -->
    <div class="row scene-tags-section-title">
      <div class="col-sm-12">
        <blockquote>
          <i class="page-header-subtitle page-subheader-truncate-title bibiscoNotSelectableText">
        {{'jsp.scene.location.subtitle' | translate}}</i>
        </blockquote>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-offset-1 col-sm-10">
        <button ng-repeat="location in $ctrl.locations" type="button"
          ng-class="{ 'btn-info': location.selected }"
          class="btn btn-sm scene-tags-button" ng-click="$ctrl.toggleLocation(location.id)">
          {{location.name}}
        </button>
      </div>
    </div>

    <!-- TIME -->
    <div class="row scene-tags-section-title">
      <div class="col-sm-12">
        <blockquote>
          <i class="page-header-subtitle page-subheader-truncate-title bibiscoNotSelectableText">
        {{'jsp.scene.time.subtitle' | translate}}</i>
        </blockquote>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-offset-1 col-sm-4">
        <div ng-if="$ctrl.scenetimegregorian" class="dropup" uib-dropdown
          on-toggle="$ctrl.calendarToggled(open)"
          is-open="$ctrl.scenetimeCalendarOpen">
          <a role="button" uib-dropdown-toggle>
            <div class="input-group">
              <input type="text"  name="date" class="form-control" readonly
              value="{{'date_format_scene_tags' | translate:{date:$ctrl.scenetimeshowed} }}{{$ctrl.scenetimeshowed.getUTCFullYear() < 0 ? $ctrl.scenetimeshowed.getUTCFullYear() * (-1) : $ctrl.scenetimeshowed.getUTCFullYear()}} {{$ctrl.scenetimeshowed.getUTCFullYear() < 0 ? 'year_bc_scene_tags' : '' | translate}} {{'time_format_scene_tags' | translate:{date:$ctrl.scenetimeshowed} }}">
              <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
            </div>
          </a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" uib-dropdown>
            <datetimepicker data-ng-model="$ctrl.scenetime"
              datetimepicker-config="{startView: 'year'}"
              data-before-render="$ctrl.beforeRender($view, $dates, $leftDate, $upDate, $rightDate)"
              data-on-set-time="$ctrl.onTimeSet(newDate, oldDate)"></datetimepicker>
          </ul>
        </div>
        <div ng-if="!$ctrl.scenetimegregorian">
          <input type="text" name="date" class="form-control" maxlength="50"
          ng-change="$ctrl.setDirty()" ng-model="$ctrl.scenetimecustom">
        </div>
      </div>
      <div class="col-sm-7">
        <div class="btn-group pull-left">
            <button type="button" class="btn btn-sm btn-default"
              ng-click="$ctrl.setScenetimetypeGregorian(true)"
              ng-class="{ 'active' : $ctrl.scenetimegregorian}">
              {{"Gregorian calendar" | translate}}
            </button>
            <button type="button" class="btn btn-sm btn-default"
              ng-click="$ctrl.setScenetimetypeGregorian(false)"
              ng-class="{ 'active' : !$ctrl.scenetimegregorian}">
              {{"Alternative calendar" | translate}}
            </button>
        </div>
      </div>
    </div>

    <!-- STRANDS -->
    <div class="row scene-tags-section-title">
      <div class="col-sm-12">
        <blockquote>
          <i class="page-header-subtitle page-subheader-truncate-title bibiscoNotSelectableText">
        {{'jsp.scene.strands.subtitle' | translate}}</i>
        </blockquote>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-offset-1 col-sm-10">
        <button ng-repeat="strand in $ctrl.strands" type="button"
          ng-class="{ 'btn-info': strand.selected }"
          class="btn btn-sm scene-tags-button" ng-click="$ctrl.toggleStrand(strand.id)">
          {{strand.name}}
        </button>
      </div>
    </div>

  </div>
</div>

<div class="detail-footer bibiscoNotSelectableText">
  <div class="container">
    <div class="row">
      <hr />
    </div>
    <div class="row">
      <span class="pull-right">
        <button type="button" class="btn btn-primary" ng-disabled="!$ctrl.dirty"
          ng-click="$ctrl.save()">
          <span ng-if="$ctrl.saving"><i class="fa fa-circle-o-notch fa-spin"></i></span>
      <span>{{"jsp.common.button.save" | translate}}</span>
      </button>
      <buttonwithconfirm enableconfirm="$ctrl.dirty" buttonlabel="jsp.common.button.back" buttonfunction="$ctrl.back()" buttonstyle="btn-default" confirmmessage="js.common.message.confirmExitWithoutSave">
      </buttonwithconfirm>
      </span>
    </div>
  </div>
</div>
